if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(q){function M(){for(var e=0;e<M.maps.length;e++)M.maps[e].resize()}function Q(e){return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function R(e){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}function U(e,h){if(e.row>h.row){var a=e;e=h;h=a}return{x0:e.column,y0:e.row,x1:h.column,y1:h.row,dx:h.column-e.column,dy:h.row-e.row}}function Z(e,h,a,c,d){a=Math.max(a,Math.floor(h.y0));c=Math.min(c,Math.ceil(h.y1));if(e.x0==h.x0&&e.y0==h.y0?e.x0+h.dy/e.dy*e.dx<h.x1:e.x1-h.dy/
e.dy*e.dx<h.x0){var k=e;e=h;h=k}k=e.dx/e.dy;var g=h.dx/h.dy,j=e.dx>0,r=h.dx<0;for(a=a;a<c;a++){var n=k*Math.max(0,Math.min(e.dy,a+j-e.y0))+e.x0;d(Math.floor(g*Math.max(0,Math.min(h.dy,a+r-h.y0))+h.x0),Math.ceil(n),a)}}function $(e,h,a,c,d,k){var g=U(e,h);h=U(h,a);e=U(a,e);if(g.dy>h.dy){a=g;g=h;h=a}if(g.dy>e.dy){a=g;g=e;e=a}if(h.dy>e.dy){a=h;h=e;e=a}g.dy&&Z(e,g,c,d,k);h.dy&&Z(e,h,c,d,k)}q.version="2.0.2+9";var S={x:0,y:0};q.id=function(){var e=0;return function(){return++e}}();q.svg=function(e){return document.createElementNS(q.ns.svg,
e)};q.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};q.transform=function(e,h,a,c,d,k){var g={},j,r,n;if(!arguments.length){e=1;h=d=a=0;c=1;k=0}g.zoomFraction=function(m){if(!arguments.length)return r;r=m;j=Math.floor(r+Math.log(Math.sqrt(e*e+h*h+a*a+c*c))/Math.log(2));n=Math.pow(2,-j);return g};g.apply=function(m){var o=Math.pow(2,-m.zoom),w=Math.pow(2,m.zoom-j);return{column:(e*m.column*o+a*m.row*o+d)*w,row:(h*m.column*o+c*m.row*o+k)*w,zoom:m.zoom-j}};g.unapply=function(m){var o=
Math.pow(2,-m.zoom),w=Math.pow(2,m.zoom+j);return{column:(m.column*o*c-m.row*o*a-d*c+k*a)/(e*c-h*a)*w,row:(m.column*o*h-m.row*o*e-d*h+k*e)/(a*h-c*e)*w,zoom:m.zoom+j}};g.toString=function(){return"matrix("+[e*n,h*n,a*n,c*n].join(" ")+" 0 0)"};return g.zoomFraction(0)};q.cache=function(e,h){function a(o){m--;h&&h(o);delete g[o.key];if(o.next)o.next.prev=o.prev;else if(r=o.prev)r.next=null;if(o.prev)o.prev.next=o.next;else if(j=o.next)j.prev=null}function c(){for(var o=r;m>n;o=o.prev){if(!o)break;o.lock||
a(o)}}var d={},k={},g={},j=null,r=null,n=64,m=0;d.peek=function(o){return g[[o.zoom,o.column,o.row].join("/")]};d.load=function(o,w){var f=[o.zoom,o.column,o.row].join("/"),l=g[f];if(l){if(l.prev){if(l.prev.next=l.next)l.next.prev=l.prev;else r=l.prev;l.prev=null;l.next=j;j=j.prev=l}l.lock=1;return k[f]=l}l={key:f,column:o.column,row:o.row,zoom:o.zoom,next:j,prev:null,lock:1};e.call(null,l,w);k[f]=g[f]=l;if(j)j.prev=l;else r=l;j=l;m++;c();return l};d.unload=function(o){if(!(o in k))return false;var w=
k[o];w.lock=0;delete k[o];w.request&&w.request.abort(false)?a(w):c();return w};d.locks=function(){return k};d.size=function(o){if(!arguments.length)return n;n=o;c();return d};return d};q.url=function(e){function h(c){var d=c.zoom<0?1:1<<c.zoom,k=c.column%d;if(k<0)k+=d;return e.replace(/{(.)}/g,function(g,j){switch(j){case "S":return a[(Math.abs(c.zoom)+c.row+k)%a.length];case "Z":return c.zoom;case "X":return k;case "Y":return c.row;case "B":var r=q.map.coordinateLocation({row:c.row,column:k,zoom:c.zoom}),
n=q.map.coordinateLocation({row:c.row+1,column:k+1,zoom:c.zoom}),m=Math.ceil(Math.log(c.zoom)/Math.LN2);return n.lat.toFixed(m)+","+r.lon.toFixed(m)+","+r.lat.toFixed(m)+","+n.lon.toFixed(m)}return j})}var a=[];h.template=function(c){if(!arguments.length)return e;e=c;return h};h.hosts=function(c){if(!arguments.length)return a;a=c;return h};return h};q.dispatch=function(e){var h={};e.on=function(a,c){for(var d=h[a]||(h[a]=[]),k=0;k<d.length;k++)if(d[k].handler==c)return e;d.push({handler:c,on:true});
return e};e.off=function(a,c){var d=h[a];if(d)for(var k=0;k<d.length;k++){var g=d[k];if(g.handler==c){g.on=false;d.splice(k,1);break}}return e};return function(a){var c=h[a.type];if(c){c=c.slice();for(var d=0;d<c.length;d++){var k=c[d];k.on&&k.handler.call(e,a)}}}};q.queue=function(){function e(){if(!(d>=k||!c.length)){d++;c.pop()()}}function h(g){for(var j=0;j<c.length;j++)if(c[j]==g){c.splice(j,1);return true}return false}function a(g,j,r){function n(){m=new XMLHttpRequest;r&&m.overrideMimeType(r);
m.open("GET",g,true);m.onreadystatechange=function(){if(m.readyState==4){d--;m.status<300&&j(m);e()}};m.send(null)}var m;c.push(n);e();return{abort:function(o){if(h(n))return true;if(o&&m){m.abort();return true}return false}}}var c=[],d=0,k=6;return{text:function(g,j,r){return a(g,function(n){n.responseText&&j(n.responseText)},r)},xml:function(g,j){return a(g,function(r){r.responseXML&&j(r.responseXML)},"application/xml")},json:function(g,j){return a(g,function(r){r.responseText&&j(JSON.parse(r.responseText))},
"application/json")},image:function(g,j,r){function n(){m=document.createElement("img");m.onerror=function(){d--;e()};m.onload=function(){d--;r(m);e()};m.src=j;g.setAttributeNS(q.ns.xlink,"href",j)}var m;c.push(n);e();return{abort:function(o){if(h(n))return true;if(o&&m){m.src="about:";return true}return false}}}}}();q.map=function(){function e(){if(w)if(n<w[0])n=w[0];else if(n>w[1])n=w[1];m=n-(n=Math.round(n));o=Math.pow(2,m)}function h(){if(G){var i=45/Math.pow(2,n+m-3),y=Math.max(Math.abs(s*g.x+
l*g.y),Math.abs(t*g.x+v*g.y)),x=Q(D-y*i/j.y);y=Q(L+y*i/j.y);r.lat=Math.max(x,Math.min(y,r.lat));x=Math.max(Math.abs(s*g.y+l*g.x),Math.abs(t*g.y+v*g.x));r.lon=Math.max(G[0].lon-x*i/j.x,Math.min(G[1].lon+x*i/j.x,r.lon))}}var a={},c,d,k=S,g=S,j={x:256,y:256},r={lat:37.76487,lon:-122.41948},n=12,m=0,o=1,w=[1,18],f=0,l=1,s=0,v=1,t=0,D=-180,L=180,G=[{lat:Q(D),lon:-Infinity},{lat:Q(L),lon:Infinity}];a.locationCoordinate=function(i){i=q.map.locationCoordinate(i);var y=Math.pow(2,n);i.column*=y;i.row*=y;i.zoom+=
n;return i};a.coordinateLocation=q.map.coordinateLocation;a.coordinatePoint=function(i,y){var x=Math.pow(2,n-y.zoom),F=Math.pow(2,n-i.zoom),I=(y.column*x-i.column*F)*j.x*o;x=(y.row*x-i.row*F)*j.y*o;return{x:g.x+l*I-s*x,y:g.y+s*I+l*x}};a.pointCoordinate=function(i,y){var x=Math.pow(2,n-i.zoom),F=(y.x-g.x)/o,I=(y.y-g.y)/o;return{column:i.column*x+(v*F-t*I)/j.x,row:i.row*x+(t*F+v*I)/j.y,zoom:n}};a.locationPoint=function(i){var y=Math.pow(2,n+m-3)/45,x=(i.lon-r.lon)*y*j.x;i=(R(r.lat)-R(i.lat))*y*j.y;
return{x:g.x+l*x-s*i,y:g.y+s*x+l*i}};a.pointLocation=function(i){var y=45/Math.pow(2,n+m-3),x=(i.x-g.x)*y;i=(i.y-g.y)*y;return{lon:r.lon+(v*x-t*i)/j.x,lat:Q(R(r.lat)-(t*x+v*i)/j.y)}};var C=q.svg("rect");C.setAttribute("visibility","hidden");C.setAttribute("pointer-events","all");a.container=function(i){if(!arguments.length)return c;c=i;c.setAttribute("class","map");c.appendChild(C);return a.resize()};a.focusableParent=function(){for(var i=c;i;i=i.parentNode)if(i.tabIndex>=0)return i;return window};
a.mouse=function(i){var y=(c.ownerSVGElement||c).createSVGPoint();if(V<0&&(window.scrollX||window.scrollY)){var x=document.body.appendChild(q.svg("svg"));x.style.position="absolute";x.style.top=x.style.left="0px";var F=x.getScreenCTM();V=!(F.f||F.e);document.body.removeChild(x)}if(V){y.x=i.pageX;y.y=i.pageY}else{y.x=i.clientX;y.y=i.clientY}return y.matrixTransform(c.getScreenCTM().inverse())};a.size=function(i){if(!arguments.length)return k;d=i;return a.resize()};a.resize=function(){if(d){k=d;M.remove(a)}else{var i=
c.ownerSVGElement||c;if(i.offsetWidth==null){C.setAttribute("width","100%");C.setAttribute("height","100%");i=C}b=i.getBoundingClientRect();k={x:b.width,y:b.height};M.add(a)}C.setAttribute("width",k.x);C.setAttribute("height",k.y);g={x:k.x/2,y:k.y/2};h();a.dispatch({type:"resize"});return a};a.tileSize=function(i){if(!arguments.length)return j;j=i;a.dispatch({type:"move"});return a};a.center=function(i){if(!arguments.length)return r;r=i;h();a.dispatch({type:"move"});return a};a.panBy=function(i){var y=
45/Math.pow(2,n+m-3),x=i.x*y;i=i.y*y;return a.center({lon:r.lon+(t*i-v*x)/j.x,lat:Q(R(r.lat)+(t*x+v*i)/j.y)})};a.centerRange=function(i){if(!arguments.length)return G;if(G=i){D=G[0].lat>-90?R(G[0].lat):-Infinity;L=G[0].lat<90?R(G[1].lat):Infinity}else{D=-Infinity;L=Infinity}h();a.dispatch({type:"move"});return a};a.zoom=function(i){if(!arguments.length)return n+m;n=i;e();return a.center(r)};a.zoomBy=function(i,y,x){if(arguments.length<2)return a.zoom(n+m+i);if(arguments.length<3)x=a.pointLocation(y);
n=n+m+i;e();var F=a.locationPoint(x);return a.panBy({x:y.x-F.x,y:y.y-F.y})};a.zoomRange=function(i){if(!arguments.length)return w;w=i;return a.zoom(n+m)};a.angle=function(i){if(!arguments.length)return f;f=i;l=Math.cos(f);s=Math.sin(f);v=Math.cos(-f);t=Math.sin(-f);h();a.dispatch({type:"move"});return a};a.add=function(i){i.map(a);return a};a.remove=function(i){i.map(null);return a};a.dispatch=q.dispatch(a);return a};M.maps=[];M.add=function(e){for(var h=0;h<M.maps.length;h++)if(M.maps[h]==e)return;
M.maps.push(e)};M.remove=function(e){for(var h=0;h<M.maps.length;h++)if(M.maps[h]==e){M.maps.splice(h,1);return}};window.addEventListener("resize",M,false);q.map.locationCoordinate=function(e){var h=1/360;return{column:(e.lon+180)*h,row:(180-R(e.lat))*h,zoom:0}};q.map.coordinateLocation=function(e){var h=45/Math.pow(2,e.zoom-3);return{lon:h*e.column-180,lat:Q(180-h*e.row)}};var V=/WebKit/.test(navigator.userAgent)?-1:0;q.layer=function(e,h){function a(){function f(u){var z=u.zoom,A=z<0?1:1<<z,B=u.column%
A,H=u.row;if(B<0)B+=A;return{locationPoint:function(J){J=q.map.locationCoordinate(J);var K=Math.pow(2,z-J.zoom);return{x:G.x*(K*J.column-B),y:G.y*(K*J.row-H)}}}}function l(u,z,A){var B=y.zoom,H=2-F,J=4+F;for(u=u;u<z;u++){var K=d.load({column:u,row:A,zoom:B},f);if(!K.ready&&!(K.key in I)){K.proxyRefs={};for(var P,T,N,O=1;O<=H;O++){T=true;for(var W=0,aa=1<<O;W<=aa;W++)for(var X=0;X<=aa;X++)if((N=d.peek(P={column:(u<<O)+X,row:(A<<O)+W,zoom:B+O}))&&N.ready){I[N.key]=d.load(P);N.proxyCount++;K.proxyRefs[N.key]=
N}else T=false;if(T)break}if(!T)for(O=1;O<=J;O++)if((N=d.peek(P={column:u>>O,row:A>>O,zoom:B-O}))&&N.ready){I[N.key]=d.load(P);N.proxyCount++;K.proxyRefs[N.key]=N;break}}I[K.key]=K}}var s=c.map(),v=s.zoom(),t=v-(v=Math.round(v)),D=s.size(),L=s.angle(),G=s.tileSize(),C=s.locationCoordinate(s.center());g?m.removeAttribute("visibility"):m.setAttribute("visibility","hidden");for(var i=-4;i<=2;i++)w[i].setAttribute("class","zoom"+(i<0?"":"+")+i+" zoom"+(v+i));m.setAttribute("transform","translate("+D.x/
2+","+D.y/2+")"+(L?"rotate("+L/Math.PI*180+")":"")+(t?"scale("+Math.pow(2,t)+")":"")+(o?o.zoomFraction(t):""));var y=s.pointCoordinate(C,S);i=s.pointCoordinate(C,{x:D.x,y:0});var x=s.pointCoordinate(C,D);s=s.pointCoordinate(C,{x:0,y:D.y});if(!t&&!L&&!o){C.column=(Math.round(G.x*C.column)+(D.x&1)/2)/G.x;C.row=(Math.round(G.y*C.row)+(D.y&1)/2)/G.y}var F=j?j(v)-v:0;if(F){t=Math.pow(2,F);y.column*=t;y.row*=t;i.column*=t;i.row*=t;x.column*=t;x.row*=t;s.column*=t;s.row*=t;y.zoom=i.zoom=x.zoom=s.zoom+=F}if(o){y=
o.unapply(y);i=o.unapply(i);x=o.unapply(x);s=o.unapply(s);C=o.unapply(C)}v=d.locks();var I={};for(var E in v)v[E].proxyCount=0;if(g&&F>-5&&F<3){t=y.zoom<0?1:1<<y.zoom;if(k){$(y,i,x,0,t,l);$(x,s,y,0,t,l)}else{x=Math.floor((y.column+x.column)/2);s=Math.max(0,Math.min(t-1,Math.floor((i.row+s.row)/2)));i=Math.min(4,y.zoom);x=x>>i<<i;s=s>>i<<i;l(x,x+1,s)}}for(E in I){i=I[E];t=Math.pow(2,i.level=i.zoom-C.zoom);x=G.x*(i.column-C.column*t);s=G.y*(i.row-C.row*t);i.element.setAttribute("transform","translate("+
x+","+s+")")}for(E in v)if(!(E in I)){i=d.unload(E);i.element.parentNode.removeChild(i.element);delete i.proxyRefs}for(E in I){i=I[E];if(i.element.parentNode!=w[i.level]){w[i.level].appendChild(i.element);c.show&&c.show(i)}}}var c={},d=c.cache=q.cache(e,h).size(512),k=true,g=true,j,r,n,m,o,w;c.map=function(f){if(!arguments.length)return n;if(n){if(n==f){m.parentNode.appendChild(m);return c}n.off("move",a).off("resize",a);m.parentNode.removeChild(m);m=w=null}if(n=f){m=n.container().appendChild(q.svg("g"));
r&&m.setAttribute("id",r);m.setAttribute("class","layer");w={};for(var l=-4;l<=-1;l++)(w[l]=m.appendChild(q.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-l)+")");for(l=2;l>=1;l--)(w[l]=m.appendChild(q.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-l)+")");w[0]=m.appendChild(q.svg("g"));c.init&&c.init(m);n.on("move",a).on("resize",a);a()}return c};c.container=function(){return m};c.id=function(f){if(!arguments.length)return r;r=f;return c};c.visible=function(f){if(!arguments.length)return g;
g=f;n&&a();return c};c.transform=function(f){if(!arguments.length)return o;o=f;n&&a();return c};c.zoom=function(f){if(!arguments.length)return j;j=typeof f=="function"||f==null?f:function(){return f};return c};c.tile=function(f){if(!arguments.length)return k;k=f;return c};c.dispatch=q.dispatch(c);c.on("load",function(f){if(f.tile.proxyRefs){for(var l in f.tile.proxyRefs){var s=f.tile.proxyRefs[l];--s.proxyCount<=0&&d.unload(l)&&s.element.parentNode.removeChild(s.element)}delete f.tile.proxyRefs}});
return c};q.image=function(){var e=q.layer(function(a){var c=a.element=q.svg("image"),d=e.map().tileSize();c.setAttribute("preserveAspectRatio","none");c.setAttribute("width",d.x);c.setAttribute("height",d.y);c.setAttribute("opacity",0);if(typeof h=="function")a.request=q.queue.image(c,h(a),function(){delete a.request;a.ready=true;c.removeAttribute("opacity");e.dispatch({type:"load",tile:a})});else{a.ready=true;c.setAttributeNS(q.ns.xlink,"href",h);e.dispatch({type:"load",tile:a})}},function(a){a.request&&
a.request.abort(true)}),h="about:blank";e.url=function(a){if(!arguments.length)return h;h=typeof a=="string"&&/{.}/.test(a)?q.url(a):a;return e};return e};q.geoJson=function(e){function h(f,l){return f&&f.type in w&&w[f.type](f,l)}function a(f,l){var s=l({lat:f[1],lon:f[0]}),v=q.svg("circle");v.setAttribute("r",4.5);v.setAttribute("cx",s.x);v.setAttribute("cy",s.y);return v}function c(f,l,s,v){v.push("M");for(var t=0;t<f.length-l;t++){p=s({lat:f[t][1],lon:f[t][0]});v.push(p.x);v.push(",");v.push(p.y);
v.push("L")}v.pop()}function d(f,l,s,v){for(var t=0;t<f.length;t++)c(f[t],l,s,v);l&&v.push("Z")}function k(f,l,s,v){for(var t=[],D=0;D<l.length;D++)f(l[D],s,v,t);if(t.length){f=q.svg("path");f.setAttribute("d",t.join(""));return f}}var g=q.layer(function(f,l){function s(t){var D=[];if(t.next)f.request=e(t.next.href,s);switch(t.type){case "FeatureCollection":for(var L=0;L<t.features.length;L++){var G=t.features[L],C=h(G.geometry,l.locationPoint);C&&D.push({element:v.appendChild(C),data:G})}break;case "Feature":(C=
h(t.geometry,l.locationPoint))&&D.push({element:v.appendChild(C),data:t});break;default:(C=h(t,l.locationPoint))&&D.push({element:v.appendChild(C),data:{type:"Feature",geometry:t}});break}f.ready=true;D.push.apply(m[f.key]||(m[f.key]=[]),D);g.dispatch({type:"load",tile:f,features:D})}var v=f.element=q.svg("g");l=l(f);if(o)s({type:"FeatureCollection",features:o});else f.request=e(typeof j=="function"?j(f):j,s);n&&v.setAttribute("clip-path","url(#"+n+")")},function(f){f.request&&f.request.abort(true);
delete m[f.key]}),j="about:blank",r=true,n,m={},o;if(!arguments.length)e=q.queue.json;var w={Point:function(f,l){return a(f.coordinates,l)},MultiPoint:function(f,l){for(var s=q.svg("g"),v=0;v<f.coordinates.length;v++)s.appendChild(a(f.coordinates[v],l));return s},LineString:function(f,l){return k(c,[f.coordinates],0,l)},MultiLineString:function(f,l){return k(c,f.coordinates,0,l)},Polygon:function(f,l){return k(d,[f.coordinates],1,l)},MultiPolygon:function(f,l){return k(d,f.coordinates||f.coords,1,
l)},GeometryCollection:function(f,l){for(var s=q.svg("g"),v=0;v<f.geometries.length;v++){var t=h(f.geometries[v],l);t&&s.appendChild(t)}return s}};g.url=function(f){if(!arguments.length)return j;j=typeof f=="string"&&/{.}/.test(f)?q.url(f):f;typeof j=="string"&&g.tile(false);return g};g.features=function(f){if(!arguments.length)return o;f&&g.tile(false);o=f;return g};g.clip=function(f){if(!arguments.length)return r;r=f;return g};g.init=function(f){if(r&&g.tile()){var l=g.map().tileSize(),s=f.insertBefore(q.svg("clipPath"),
f.firstChild),v=s.appendChild(q.svg("rect"));s.setAttribute("id",n="org.polymaps."+q.id());v.setAttribute("width",l.x);v.setAttribute("height",l.y)}f.setAttribute("fill-rule","evenodd")};g.show=function(f){g.dispatch({type:"show",tile:f,features:m[f.key]||[]})};g.reshow=function(){var f=g.cache.locks();for(var l in f)g.show(f[l])};return g};q.dblclick=function(){function e(d){var k=a.zoom();k=d.shiftKey?Math.ceil(k)-k-1:1-k+Math.floor(k);a.zoomBy(k,a.mouse(d))}var h={},a,c;h.map=function(d){if(!arguments.length)return a;
if(a){c.removeEventListener("dblclick",e,false);c=null}if(a=d){c=a.container();c.addEventListener("dblclick",e,false)}return h};return h};q.drag=function(){function e(j){g={x:j.clientX,y:j.clientY};c.focusableParent().focus();j.preventDefault();k=document.body.style.cursor;document.body.style.cursor="move"}function h(j){if(g){c.panBy({x:j.clientX-g.x,y:j.clientY-g.y});g.x=j.clientX;g.y=j.clientY}}var a={},c,d,k,g;a.map=function(j){if(!arguments.length)return c;if(c){d.removeEventListener("mousedown",
e,false);d=null}if(c=j){d=c.container();d.addEventListener("mousedown",e,false)}return a};window.addEventListener("mousemove",h,false);window.addEventListener("mouseup",function(j){if(g){h(j);g=null;document.body.style.cursor=k}},false);return a};q.wheel=function(){function e(){g=null}function h(n){var m=(n.wheelDelta/120||-n.detail)*0.1,o=j.mouse(n);if(Y<0){var w=Date.now(),f=w-d;if(f>9&&Math.abs(n.wheelDelta)/f>=50)Y=1;d=w}if(Y==1)m*=0.03;g||(g=j.pointLocation(o));j.off("move",e);if(k)j.zoomBy(m,
o,g);else if(m){w=Date.now();if(w-c>200){j.zoomBy(m>0?+1:-1,o,g);c=w}}j.on("move",e);n.preventDefault();return false}var a={},c=0,d=0,k=true,g,j,r;a.smooth=function(n){if(!arguments.length)return k;k=n;return a};a.map=function(n){if(!arguments.length)return j;if(j){r.removeEventListener("mousemove",e,false);r.removeEventListener("mousewheel",h,false);r.removeEventListener("DOMMouseScroll",h,false);r=null;j.off("move",e)}if(j=n){j.on("move",e);r=j.container();r.addEventListener("mousemove",e,false);
r.addEventListener("mousewheel",h,false);r.addEventListener("DOMMouseScroll",h,false)}return a};return a};var Y=/WebKit\/533/.test(navigator.userAgent)?-1:0;q.arrow=function(){function e(w){if(!(w.ctrlKey||w.altKey||w.metaKey)){var f=Date.now(),l=0,s=0,v=0;switch(w.keyCode){case 37:if(!d.left){k=f;d.left=1;d.right||(l=n)}break;case 39:if(!d.right){k=f;d.right=1;d.left||(l=-n)}break;case 38:if(!d.up){k=f;d.up=1;d.down||(s=n)}break;case 40:if(!d.down){k=f;d.down=1;d.up||(s=-n)}break;case 109:case 189:if(!d.plus){k=
f;d.plus=1;d.minus||(v=-1)}break;case 61:case 187:if(!d.minus){k=f;d.minus=1;d.plus||(v=1)}break;default:return}if(v){f=m.zoom();m.zoom(v<0?Math.ceil(f)-1:Math.floor(f)+1)}else if(l||s)m.panBy({x:l,y:s});if(!g&&d.left|d.right|d.up|d.down)g=setInterval(a,r);w.preventDefault()}}function h(w){k=Date.now();switch(w.keyCode){case 37:d.left=0;break;case 39:d.right=0;break;case 38:d.up=0;break;case 40:d.down=0;break;case 109:case 189:d.plus=0;break;case 61:case 187:d.minus=0;break;default:return}if(g&&!(d.left|
d.right|d.up|d.down))g=clearInterval(g);w.preventDefault()}function a(){if(m)if(!(Date.now()<k+j)){var w=(d.left-d.right)*n,f=(d.up-d.down)*n;if(w||f)m.panBy({x:w,y:f})}}var c={},d={left:0,right:0,up:0,down:0,plus:0,minus:0},k=0,g,j=250,r=50,n=16,m,o;c.map=function(w){if(!arguments.length)return m;if(m){o.removeEventListener("keydown",e,false);o.removeEventListener("keyup",h,false);o=null}if(m=w){o=m.focusableParent();o.addEventListener("keydown",e,false);o.addEventListener("keyup",h,false)}return c};
c.speed=function(w){if(!arguments.length)return n;n=w;return c};return c};q.hash=function(){function e(){var g=k.center(),j=k.zoom(),r=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));g="#"+j.toFixed(2)+"/"+g.lat.toFixed(r)+"/"+g.lon.toFixed(r);if(c!==g)location.replace(c=g)}function h(){if(location.hash!==c){var g=(c=location.hash).substring(1).split("/").map(Number);if(g.length<3||g.some(isNaN))e();else{var j=k.size();k.zoomBy(g[0]-k.zoom(),{x:j.x/2,y:j.y/2},{lat:Math.min(d,Math.max(-d,g[1])),lon:g[2]})}}}
var a={},c,d=89.99999999,k;a.map=function(g){if(!arguments.length)return k;if(k){k.off("move",e);window.removeEventListener("hashchange",h,false)}if(k=g){k.on("move",e);window.addEventListener("hashchange",h,false);location.hash?h():e()}return a};return a};q.interact=function(){var e={},h=q.drag(),a=q.wheel(),c=q.dblclick(),d=q.arrow();e.map=function(k){h.map(k);a.map(k);c.map(k);d.map(k);return e};return e};q.compass=function(){function e(u){s.setAttribute("class","compass active");F||(F=setInterval(h,
C));I&&E.panBy(I);L=Date.now();return r(u)}function h(){I&&Date.now()>L+G&&E.panBy(I)}function a(){s.setAttribute("class","compass");if(F){clearInterval(F);F=0}}function c(u){return function(){u?this.setAttribute("class","active"):this.removeAttribute("class");I=u}}function d(u){return function(z){s.setAttribute("class","compass active");var A=E.zoom();E.zoom(u<0?Math.ceil(A)-1:Math.floor(A)+1);return r(z)}}function k(u){return function(z){E.zoom(u);return r(z)}}function g(){this.setAttribute("class",
"active")}function j(){this.removeAttribute("class")}function r(u){u.stopPropagation();u.preventDefault();return false}function n(u){var z=Math.SQRT1_2*t,A=t*0.7,B=t*0.2,H=q.svg("g"),J=H.appendChild(q.svg("path")),K=H.appendChild(q.svg("path"));J.setAttribute("class","direction");J.setAttribute("pointer-events","all");J.setAttribute("d","M0,0L"+z+","+z+"A"+t+","+t+" 0 0,1 "+-z+","+z+"Z");K.setAttribute("class","chevron");K.setAttribute("d","M"+B+","+(A-B)+"L0,"+A+" "+-B+","+(A-B));K.setAttribute("pointer-events",
"none");H.addEventListener("mousedown",e,false);H.addEventListener("mouseover",c(u),false);H.addEventListener("mouseout",c(null),false);H.addEventListener("dblclick",r,false);return H}function m(u){var z=t*0.4,A=z/2,B=q.svg("g"),H=B.appendChild(q.svg("path")),J=B.appendChild(q.svg("path")),K=B.appendChild(q.svg("path")),P=B.appendChild(q.svg("path"));H.setAttribute("class","back");H.setAttribute("d","M"+-z+",0V"+-z+"A"+z+","+z+" 0 1,1 "+z+","+-z+"V0Z");J.setAttribute("class","direction");J.setAttribute("d",
H.getAttribute("d"));K.setAttribute("class","chevron");K.setAttribute("d","M"+-A+","+-z+"H"+A+(u>0?"M0,"+(-z-A)+"V"+-A:""));P.setAttribute("class","fore");P.setAttribute("fill","none");P.setAttribute("d",H.getAttribute("d"));B.addEventListener("mousedown",d(u),false);B.addEventListener("mouseover",g,false);B.addEventListener("mouseout",j,false);B.addEventListener("dblclick",r,false);return B}function o(u){var z=t*0.2,A=t*0.4,B=q.svg("g"),H=B.appendChild(q.svg("rect")),J=B.appendChild(q.svg("path"));
H.setAttribute("pointer-events","all");H.setAttribute("fill","none");H.setAttribute("x",-A);H.setAttribute("y",-0.75*A);H.setAttribute("width",2*A);H.setAttribute("height",1.5*A);J.setAttribute("class","chevron");J.setAttribute("d","M"+-z+",0H"+z);B.addEventListener("mousedown",k(u),false);B.addEventListener("dblclick",r,false);return B}function w(){var u=t+6,z=u,A=E.size();switch(i){case "top-left":break;case "top-right":u=A.x-u;break;case "bottom-left":z=A.y-z;break;case "bottom-right":u=A.x-u;
z=A.y-z;break}s.setAttribute("transform","translate("+u+","+z+")");for(var B in v)B==E.zoom()?v[B].setAttribute("class","active"):v[B].removeAttribute("class")}function f(){for(;s.lastChild;)s.removeChild(s.lastChild);if(x!="none"){var u=s.appendChild(q.svg("g"));u.setAttribute("class","pan");var z=u.appendChild(q.svg("circle"));z.setAttribute("class","back");z.setAttribute("r",t);u.appendChild(n({x:0,y:-D})).setAttribute("transform","rotate(0)");u.appendChild(n({x:D,y:0})).setAttribute("transform",
"rotate(90)");u.appendChild(n({x:0,y:D})).setAttribute("transform","rotate(180)");u.appendChild(n({x:-D,y:0})).setAttribute("transform","rotate(270)");u=u.appendChild(q.svg("circle"));u.setAttribute("fill","none");u.setAttribute("class","fore");u.setAttribute("r",t)}if(y!="none"){u=s.appendChild(q.svg("g"));u.setAttribute("class","zoom");z=-0.5;if(y=="big"){v={};var A=E.zoomRange()[0];for(z=0;A<=E.zoomRange()[1];A++,z++)(v[A]=u.appendChild(o(A))).setAttribute("transform","translate(0,"+-(z+0.75)*
t*0.4+")")}A=x=="none"?0.4:2;u.setAttribute("transform","translate(0,"+t*(/^top-/.test(i)?A+(z+0.5)*0.4:-A)+")");u.appendChild(m(+1)).setAttribute("transform","translate(0,"+-(z+0.5)*t*0.4+")");u.appendChild(m(-1)).setAttribute("transform","scale(-1)")}w()}var l={},s=q.svg("g"),v={},t=30,D=16,L=0,G=250,C=50,i="top-left",y="small",x="small",F,I,E;s.setAttribute("class","compass");l.radius=function(u){if(!arguments.length)return t;t=u;E&&f();return l};l.speed=function(u){if(!arguments.length)return t;
D=u;return l};l.position=function(u){if(!arguments.length)return i;i=u;E&&f();return l};l.pan=function(u){if(!arguments.length)return x;x=u;E&&f();return l};l.zoom=function(u){if(!arguments.length)return y;y=u;E&&f();return l};l.map=function(u){if(!arguments.length)return E;if(E){s.parentNode.removeChild(s);E.off("move",w).off("resize",w);window.removeEventListener("mouseup",a,false)}if(E=u){window.addEventListener("mouseup",a,false);E.on("move",w).on("resize",w);E.container().appendChild(s);f()}return l};
return l};q.grid=function(){function e(){var d=c.firstChild,k=a.size(),g=a.pointLocation(S);a.pointLocation(k);var j=Math.pow(2,4-Math.round(a.zoom()));g.lat=Math.floor(g.lat/j)*j;g.lon=Math.ceil(g.lon/j)*j;for(var r;(r=a.locationPoint(g).x)<=k.x;g.lon+=j){d||(d=c.appendChild(q.svg("line")));d.setAttribute("x1",r);d.setAttribute("x2",r);d.setAttribute("y1",0);d.setAttribute("y2",k.y);d=d.nextSibling}for(;(r=a.locationPoint(g).y)<=k.y;g.lat-=j){d||(d=c.appendChild(q.svg("line")));d.setAttribute("y1",
r);d.setAttribute("y2",r);d.setAttribute("x1",0);d.setAttribute("x2",k.x);d=d.nextSibling}for(;d;){k=d.nextSibling;c.removeChild(d);d=k}}var h={},a,c=q.svg("g");c.setAttribute("class","grid");h.map=function(d){if(!arguments.length)return a;if(a){c.parentNode.removeChild(c);a.off("move",e).off("resize",e)}if(a=d){a.on("move",e).on("resize",e);a.container().appendChild(c);a.dispatch({type:"move"})}return h};return h}})(org.polymaps);
